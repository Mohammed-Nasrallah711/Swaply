import{c as i,o as t,a as r,m as C,s as N,d as y,e as R,aK as z,ar as h,aO as D,aL as M,i as T,j as p,aD as E,aE as F,b as e,a1 as k,l as m,a6 as x,aP as _,au as v,t as S,w as O,an as U,n as H,T as I,am as K,q as L}from"./index-BlBeKsLJ.js";import{_ as Z,V as G}from"./BackButton-8bkgjEHA.js";function J(V,c){return t(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})])}const Q={class:"flex items-center justify-center bg-gray-50 dark:bg-gray-800 h-screen"},W={class:"icon"},X={class:"mb-4"},Y={key:0,class:"text-red-500 text-sm"},ee={class:"mb-4"},se={key:0,class:"text-red-500 text-sm"},oe={__name:"ResetPassword",setup(V){const c=R(),g=C(),{loading:u}=N(g),d=y(c.query.identifier||""),w=y(c.query.token||""),P=z({password:h().required("كلمة المرور مطلوبة").min(6,"كلمة المرور يجب أن تكون 6 أحرف على الأقل"),confirm_password:h().oneOf([D("password")],"كلمة المرور غير متطابقة").required("تأكيد كلمة المرور مطلوب")}),{handleSubmit:j,errors:a,defineField:f}=M({validationSchema:P}),q=T("emitter"),[l,B]=f("password"),[n,$]=f("confirm_password"),b=j(async A=>{if(!d.value||!w.value){q.emit("showNotificationAlert",["success","خطأ: لا يمكن إعادة ضبط كلمة المرور بدون رمز التحقق أو البريد/الهاتف"]);return}const s={password:l.value,password_confirmation:n.value,token:w.value};d.value.includes("@")?s.email=d.value:s.phone=d.value,await g.resetPassword(s)});return(A,s)=>(t(),i("div",Q,[p(Z,{class:"absolute right-6 top-8"}),s[4]||(s[4]=r("div",{class:"logo flex items-center justify-center pt-6 absolute top-1"},[r("img",{src:E,class:"w-32 dark:hidden",alt:"logo"}),r("img",{src:F,class:"w-32 hidden dark:block",alt:"logo"})],-1)),r("form",{onSubmit:s[2]||(s[2]=K((...o)=>e(b)&&e(b)(...o),["prevent"])),class:"bg-white dark:bg-gray-900 shadow-md dark:shadow-[inset_0_-4px_10px_rgba(0,0,0,0.01)] dark:shadow-slate-700 rounded-lg px-6 py-10 min-w-[250px] w-[30%]"},[r("div",W,[p(e(J),{class:"w-28 mx-auto text-blue-600"})]),s[3]||(s[3]=r("span",{class:"block text-xl font-medium text-blue-600 mt-2 mb-4"}," استعادة كلمة المرور ",-1)),r("div",X,[k(r("input",_({"onUpdate:modelValue":s[0]||(s[0]=o=>v(l)?l.value=o:null)},e(B),{type:"password",placeholder:"كلمة المرور الجديدة",class:["focus:border-gray-500 focus:ring-gray-500 rounded-md bg-gray-100 dark:bg-gray-700 dark:text-white block w-full placeholder:text-[14px] placeholder:font-normal dark:placeholder-gray-400 pl-10",{"border-red-600 focus:border-red-500 dark:text-white focus:ring-red-600 bg-red-100/70 placeholder:text-red-500":e(a).password,"focus:border-gray-500 border-none dark:text-white focus:ring-gray-500  bg-gray-100 dark:bg-gray-700 dark:placeholder-gray-400":!e(a).password}]}),null,16),[[x,e(l)]]),e(a).password?(t(),i("span",Y,S(e(a).password),1)):m("",!0)]),r("div",ee,[k(r("input",_({"onUpdate:modelValue":s[1]||(s[1]=o=>v(n)?n.value=o:null)},e($),{type:"password",placeholder:"تأكيد كلمة المرور",class:["focus:border-gray-500 focus:ring-gray-500 rounded-md bg-gray-100 dark:bg-gray-700 dark:text-white block w-full placeholder:text-[14px] placeholder:font-normal dark:placeholder-gray-400 pl-10",{"border-red-600 focus:border-red-500 dark:text-white focus:ring-red-600 bg-red-100/70 placeholder:text-red-500":e(a).confirm_password,"focus:border-gray-500 border-none dark:text-white focus:ring-gray-500  bg-gray-100 dark:bg-gray-700 dark:placeholder-gray-400":!e(a).confirm_password}]}),null,16),[[x,e(n)]]),e(a).confirm_password?(t(),i("span",se,S(e(a).confirm_password),1)):m("",!0)]),p(I,{type:"submit",label:"ارسال",class:H(["mt-6 select-none w-full",{"pointer-events-none":e(u)}]),style:U({opacity:e(u)?.8:1})},{icon:O(()=>[e(u)?(t(),L(e(G),{key:0,size:"20",class:"text-gray-50 ml-2"})):m("",!0)]),_:1},8,["style","class"])],32)]))}};export{oe as default};
