import{_ as C}from"./HeaderPage-DlbyCt4A.js";import{L as D,d as p,m as S,s as V,p as N,aq as A,g as B,W as m,a0 as I,a8 as v,h as F,c as d,o as s,a as e,j as M,F as l,a4 as i,n as f,l as U,t as o,q as h,ad as k,ab as q}from"./index-BlBeKsLJ.js";import{r as L,b as R,a as z,c as E}from"./UsersIcon-lSOQGaKp.js";import{r as O}from"./BellIcon-CefdiYAS.js";import{r as T}from"./UserIcon-BL1lMDJK.js";const W={class:"flex flex-wrap justify-evenly gap-4 mx-4 mt-6"},G={class:"flex items-center flex-col justify-center gap-4"},H={class:"font-medium text-2xl lg:text-4xl"},J={class:"flex flex-col items-stretch lg:flex-row gap-4 mt-8 pb-6 h-full"},K={class:"overflow-x-auto scrollbar-hide h-full self-stretch shadow-md rounded-lg"},P={class:"min-w-[750px] h-[25rem]"},Q={class:"bg-white border border-gray-200 dark:bg-gray-700 dark:border-gray-700 rounded-lg p-6 pb-3 transition-colors duration-200"},X={class:"flex justify-between items-center mb-6"},Y={class:"text-[14px]"},Z={class:"text-center"},ee={class:"col-span-2 text-center"},ae={class:"text-end",dir:"ltr"},te={class:"col-span-2"},re={class:"flex justify-between items-center gap-6 mb-6"},se={class:"flex flex-col gap-[2px]"},de={class:"text-gray-800 dark:text-gray-200 font-normal text-[14px]"},oe={class:"text-gray-600 dark:text-gray-400 text-[12px]"},ne={key:2,class:"flex justify-center items-center h-[50%] text-sm font-normal text-gray-800 dark:text-gray-200"},le={__name:"DashboardView",setup(ie){const{formatDate:w}=I(),c=p(!1),u=p(!0),_=S(),{user:g}=V(_),b=N([{title:"المنتجات",icon:A,style:"bg-amber-100 text-amber-700 border-amber-200",number:0},{title:"التصنيفات",icon:L,style:"bg-blue-100 text-blue-600 border-blue-200",number:0},{title:"المستخدمين",icon:R,style:"bg-green-100 text-green-600 border-green-200",number:0}]),y=p([]),n=p([]),$=r=>{switch(r){case"admin":return"مدير";case"merchant":return"تاجر";case"customer":return"مستهلك";default:return"غير معروف"}},j=r=>{switch(r){case"user":return T;case"report":return E;case"store":return z;default:return O}};let x=null;return B(async()=>{u.value=!0;try{const r=await m.get("/admin/dashboard");y.value=r.data.last_users_register.map(t=>({id:t.id,name:t.name,email:t.email??"غير مسجل",phone:t.phone??"غير مسجل",role:$(t.role),created_at:w(t.created_at)})),b[0].number=r.data.products_count,b[1].number=r.data.categories_count,b[2].number=r.data.users_count}catch{}try{const r=await m.get("admin/notifications");r.status==200&&(n.value=r.data.notifications)}catch{}finally{u.value=!1}g.value?.id&&(x=v.private(`App.Models.User.${g.value.id}`),x.notification(r=>{if(r.type==="admin_notification"){const t={id:r.id,type:r.type,data:r,created_at:new Date().toISOString(),read_at:null};n.value.data=n.value.data||[],n.value.data.unshift(t)}}))}),F(()=>{x&&g.value?.id&&v.leave(`App.Models.User.${g.value.id}`)}),(r,t)=>(s(),d(l,null,[e("div",null,[M(C,{title:"لوحة التحكم-الرئيسية","is-has-add-button":!1})]),e("div",W,[u.value?(s(),d(l,{key:0},i(3,a=>e("div",{key:a,class:"border-2 rounded-xl flex items-center justify-center gap-6 lg:gap-8 h-40 w-[280px] lg:w-[340px] bg-gray-100 dark:bg-gray-800 animate-pulse"},[...t[2]||(t[2]=[e("div",{class:"w-12 lg:w-14 h-12 lg:h-14 bg-gray-300 dark:bg-gray-700 rounded"},null,-1),e("div",{class:"flex items-center flex-col justify-center gap-4"},[e("div",{class:"w-24 h-7 bg-gray-300 dark:bg-gray-700 rounded"}),e("div",{class:"w-16 h-10 bg-gray-300 dark:bg-gray-700 rounded"})],-1)])])),64)):(s(!0),d(l,{key:1},i(b,a=>(s(),d("div",{key:a.title,class:f(["border-2 rounded-xl flex items-center justify-center gap-6 lg:gap-8 h-40 text-[22px] lg:text-[28px] font-normal w-[280px] lg:w-[340px] transition-colors duration-200",a.style])},[(s(),h(k(a.icon),{class:"w-12 lg:w-14"})),e("div",G,[e("span",null,o(a.title),1),e("span",H,o(a.number),1)])],2))),128))]),e("div",J,[e("div",K,[e("div",P,[e("div",Q,[e("div",X,[t[3]||(t[3]=e("h4",{class:"text-blue-600 dark:text-blue-200 text-[20px] font-medium"}," آخر المستخدمين انضماما ",-1)),e("button",{onClick:t[0]||(t[0]=a=>r.$router.push({name:"dashboard-user"})),class:"border-2 text-[12px] text-nowrap text-blue-600 border-blue-400 dark:text-blue-200 dark:border-blue-200 rounded-lg px-3 py-[6px] font-normal transition-all duration-200 hover:bg-blue-400 hover:text-white"}," عرض المزيد ")]),e("div",Y,[t[5]||(t[5]=e("div",{class:"row grid grid-cols-8 gap-4 mb-2 font-normal text-gray-800 dark:text-gray-200"},[e("span",null,"رقم المستخدم"),e("span",null,"اسم المستخدم"),e("span",{class:"col-span-2 text-center"},"ايميل المستخدم"),e("span",null,"رقم الهاتف"),e("span",null,"الدور"),e("span",{class:"col-span-2"},"تاريخ الاضمام")],-1)),u.value?(s(),d(l,{key:0},i(5,a=>e("div",{class:"row grid grid-cols-8 gap-4 py-4 border-b border-gray-200 dark:border-gray-700",key:a},[...t[4]||(t[4]=[q('<div class="h-4 bg-gray-300 dark:bg-gray-800 rounded animate-pulse" data-v-144d9271></div><div class="h-4 bg-gray-300 dark:bg-gray-800 rounded animate-pulse" data-v-144d9271></div><div class="col-span-2 h-4 bg-gray-300 dark:bg-gray-800 rounded animate-pulse" data-v-144d9271></div><div class="h-4 bg-gray-300 dark:bg-gray-800 rounded animate-pulse" data-v-144d9271></div><div class="h-4 bg-gray-300 dark:bg-gray-800 rounded animate-pulse" data-v-144d9271></div><div class="col-span-2 h-4 bg-gray-300 dark:bg-gray-800 rounded animate-pulse" data-v-144d9271></div>',6)])])),64)):(s(!0),d(l,{key:1},i(y.value,a=>(s(),d("div",{class:"row grid grid-cols-8 gap-4 py-4 border-b last-of-type:border-none text-gray-600 dark:text-gray-400 border-gray-200 dark:border-gray-700",key:a.id},[e("span",Z,"# "+o(a.id),1),e("span",null,o(a.name),1),e("span",ee,o(a.email),1),e("span",ae,o(a.phone),1),e("span",null,o(a.role),1),e("span",te,o(a.created_at??"8-8-2020"),1)]))),128))])])])]),e("div",{class:f(["bg-white border border-gray-200 overflow-hidden dark:bg-gray-700 dark:shadow-gray-700 dark:border-gray-700 shadow-md rounded-lg p-6 pb-3 flex-1 max-h-[25rem] min-w-[280px] transition-colors duration-200",{"overflow-y-auto":c.value}])},[e("div",re,[t[6]||(t[6]=e("h4",{class:"text-blue-600 dark:text-blue-200 text-[20px] font-medium text-nowrap"}," آخر الإشعارات ",-1)),n.value.data?.length>4?(s(),d("button",{key:0,onClick:t[1]||(t[1]=a=>c.value=!c.value),class:"border-2 text-[12px] text-nowrap text-blue-600 dark:text-blue-200 border-blue-500 dark:border-blue-200 rounded-lg px-3 py-[6px] font-normal transition-all duration-200 hover:bg-blue-500 hover:text-white dark:hover:text-white"},o(c.value?"عرض أقل":"عرض الكل"),1)):U("",!0)]),u.value?(s(),d(l,{key:0},i(5,a=>e("div",{class:"box-notification flex items-center gap-4 py-4 border-b border-b-gray-200 dark:border-b-gray-700",key:a},[...t[7]||(t[7]=[e("div",{class:"w-6 h-6 bg-gray-300 dark:bg-gray-800 rounded animate-pulse"},null,-1),e("div",{class:"flex flex-col gap-2 flex-1"},[e("div",{class:"h-4 bg-gray-300 dark:bg-gray-800 rounded animate-pulse w-3/4"}),e("div",{class:"h-3 bg-gray-300 dark:bg-gray-800 rounded animate-pulse w-full"})],-1)])])),64)):n.value.data?.length>0?(s(!0),d(l,{key:1},i(n.value.data,a=>(s(),d("div",{class:"box-notification flex items-center gap-4 py-4 border-b border-b-gray-200 dark:border-b-gray-700 last-of-type:border-none",key:a.id},[(s(),h(k(j(a.data.icon_type)),{class:"w-6 text-gray-800 dark:text-gray-200"})),e("div",se,[e("span",de,o(a.data.title),1),e("span",oe,o(a.data.text),1)])]))),128)):(s(),d("p",ne," لا يوجد اي إشعارات حتى الان "))],2)])],64))}},xe=D(le,[["__scopeId","data-v-144d9271"]]);export{xe as default};
