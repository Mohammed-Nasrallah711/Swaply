import{c as p,o as d,a as r,m as E,s as A,d as u,ar as $,y as D,aK as F,aL as N,M as V,j as c,aD as q,aE as z,b as t,l as y,a1 as H,ao as L,n as b,au as T,aM as K,t as U,w as Z,an as G,T as J,am as Q,u as W,q as X}from"./index-BlBeKsLJ.js";import{_ as j}from"./ButtonTab-ChHcEJTF.js";import{_ as Y,V as ee}from"./BackButton-8bkgjEHA.js";function te(C,g){return d(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}const ae={class:"flex items-center justify-center bg-gray-50 dark:bg-gray-800 h-screen"},re={class:"icon"},se={class:"buttons bg-gray-200 dark:bg-gray-700 p-[2px] rounded-full text-[13px] flex items-center gap-x-0.5 mb-4"},oe={class:"relative",dir:"ltr"},le={class:"relative"},ne=["type","placeholder"],ie={key:0,class:"text-[14px] font-normal text-green-600"},pe={__name:"ForgotPassword",props:{},setup(C){const g=E(),{loading:f,backErrors:k,forgotMessage:w}=A(g),n=u("text"),v=u("0 59 123 4567"),_=u("مرحبا بعودتك"),x=W(),P=u(!1),i=u(!0),h=u("phone_number"),I={emailOrPhone:$().required("هذا الحقل مطلوب").test("emailOrPhone",function(a){if(!a)return!1;const e=/^[0-9]{10}$/,l=i.value;return(l?e.test(a):$().email().isValidSync(a))?!0:this.createError({message:l?"أدخل رقم هاتف صحيح":"ادخل بريد إلكتروني صحيح"})})},M=D(()=>F(I)),{handleSubmit:R,errors:m,defineField:B,resetForm:S}=N({validationSchema:M,context:{type:n.value}}),[s]=B("emailOrPhone");V(i,a=>{a?(v.value="0 59 123 4567",h.value="phone_number",n.value="text",s.value=""):(v.value="example@gmail.com",h.value="email",n.value="email",s.value=""),S({values:{emailOrPhone:""},errors:{}}),x.replace({name:x.currentRoute.value.name,query:{using:h.value}})},{immediate:!0}),V(()=>x.currentRoute.value.name,(a,e)=>{if(a!==e&&S({values:{emailOrPhone:""},errors:{}}),a=="login"){P.value=!0,_.value="مرحبا بعودتك";return}P.value=!1,_.value="انضمام"},{immediate:!0});const O=R(async a=>{const e={};i.value?e.phone="+97"+s.value:e.email=s.value,await g.forgotPassword(e),e.phone?localStorage.setItem("resetIdentifier",e.phone):localStorage.setItem("resetIdentifier",e.email)}),o=a=>Array.isArray(k.value?.[a])?k.value[a][0]:null;return(a,e)=>(d(),p("div",ae,[c(Y,{class:"absolute right-6 top-8"}),e[6]||(e[6]=r("div",{class:"logo flex items-center justify-center pt-6 absolute top-1"},[r("img",{src:q,class:"w-32 dark:hidden",alt:"logo"}),r("img",{src:z,class:"w-32 hidden dark:block",alt:"logo"})],-1)),r("form",{onSubmit:e[3]||(e[3]=Q((...l)=>t(O)&&t(O)(...l),["prevent"])),class:"bg-white dark:bg-gray-900 shadow-md dark:shadow-lg dark:shadow-slate-700 rounded-lg px-6 py-10 max-w-[450px] w-[95%]"},[r("div",re,[c(t(te),{class:"w-28 mx-auto text-blue-600"})]),e[4]||(e[4]=r("span",{class:"flex justify-center text-2xl font-medium dark:text-white text-black mt-2 mb-1"},"استعادة كلمة المرور",-1)),e[5]||(e[5]=r("span",{class:"flex justify-center text-center text-base font-light text-slate-500 dark:text-slate-300 mt-1 mb-4"},"ادخل البريد الالكتروني أو رقم الهاتف المرتبط بحسابك لاستعادة كلمة المرور",-1)),r("div",se,[c(j,{label:"البريد الالكتروني","is-active":!i.value,onClick:e[0]||(e[0]=l=>i.value=!1),class:"py-1 rounded-full"},null,8,["is-active"]),c(j,{label:"الهاتف","is-active":i.value,onClick:e[1]||(e[1]=l=>i.value=!0),class:"py-1 rounded-full"},null,8,["is-active"])]),r("div",oe,[r("div",le,[H(r("input",{type:n.value,placeholder:v.value,"onUpdate:modelValue":e[2]||(e[2]=l=>T(s)?s.value=l:null),class:b(["no-spinner focus:border-gray-500 focus:ring-gray-500 rounded-md bg-gray-100 dark:bg-gray-700 dark:text-white block w-full placeholder:text-[14px] placeholder:font-normal dark:placeholder-gray-400",{"pl-[35px]":n.value==="text","pl-[39px]":t(s)!==""&&n.value==="text","border-red-600 text-red-600  focus:border-red-500 dark:text-white focus:ring-red-600 bg-red-100/70 placeholder:text-red-500":t(m).emailOrPhone||o("email")||o("phone"),"focus:border-gray-500 border-none  dark:text-white focus:ring-gray-500  bg-gray-100 dark:bg-gray-700 dark:placeholder-gray-400":!t(m).emailOrPhone&&!o("email")&&!o("phone")}])},null,10,ne),[[L,t(s)]]),n.value=="text"?(d(),p("span",{key:0,class:b(["absolute left-2.5 top-1/2 -translate-y-[50%] leading-none",{"text-red-500":t(m).emailOrPhone||o("email")||o("phone"),"mt-[1px] text-[14px] dark:text-gray-400 font-normal text-gray-500":t(s)==="","text-black dark:text-white":t(s)!==""&&!o("email")&&!o("phone")}])},"+97",2)):y("",!0)]),c(K,{"error-message":t(m).emailOrPhone||o("email")||o("phone")},null,8,["error-message"]),t(w)?(d(),p("span",ie,U(t(w)),1)):y("",!0)]),c(J,{type:"submit",label:"ارسال",class:b(["mt-6 select-none",{"pointer-events-none":t(f)}]),style:G({opacity:t(f)?.8:1})},{icon:Z(()=>[t(f)?(d(),X(t(ee),{key:0,size:"20",class:"text-gray-50 ml-2"})):y("",!0)]),_:1},8,["style","class"])],32)]))}};export{pe as default};
