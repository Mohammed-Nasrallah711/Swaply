import{c as K,o as q,a as Z,d as S,g as A,z as Q,A as m,x as C,I as M,y,B as E,C as g,a9 as B,aV as O,E as X,G as I,N,K as $,aW as L,h as Y,M as W,aX as ee,av as te,aY as le,aZ as ae,a_ as oe,J as ne,aw as z,a$ as ue,ax as ie,ay as re,aA as se,F as ve,b0 as de,i as pe,b1 as ce,az as fe,D as be}from"./index-BlBeKsLJ.js";function De(t,n){return q(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[Z("path",{"fill-rule":"evenodd",d:"M12.53 16.28a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 0 1 1.06-1.06L12 14.69l6.97-6.97a.75.75 0 1 1 1.06 1.06l-7.5 7.5Z","clip-rule":"evenodd"})])}function Re(t,n){return q(),K("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[Z("path",{"fill-rule":"evenodd",d:"M11.47 7.72a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 1 1-1.06 1.06L12 9.31l-6.97 6.97a.75.75 0 0 1-1.06-1.06l7.5-7.5Z","clip-rule":"evenodd"})])}function U(t,n){if(t)return t;let s=n??"button";if(typeof s=="string"&&s.toLowerCase()==="button")return"button"}function me(t,n){let s=S(U(t.value.type,t.value.as));return A(()=>{s.value=U(t.value.type,t.value.as)}),Q(()=>{var p;s.value||m(n)&&m(n)instanceof HTMLButtonElement&&!((p=m(n))!=null&&p.hasAttribute("type"))&&(s.value="button")}),s}let _=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function H(t){var n,s;let p=(n=t.innerText)!=null?n:"",r=t.cloneNode(!0);if(!(r instanceof HTMLElement))return p;let v=!1;for(let x of r.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))x.remove(),v=!0;let e=v?(s=r.innerText)!=null?s:"":p;return _.test(e)&&(e=e.replace(_,"")),e}function xe(t){let n=t.getAttribute("aria-label");if(typeof n=="string")return n.trim();let s=t.getAttribute("aria-labelledby");if(s){let p=s.split(" ").map(r=>{let v=document.getElementById(r);if(v){let e=v.getAttribute("aria-label");return typeof e=="string"?e.trim():H(v).trim()}return null}).filter(Boolean);if(p.length>0)return p.join(", ")}return H(t).trim()}function ge(t){let n=S(""),s=S("");return()=>{let p=m(t);if(!p)return"";let r=p.innerText;if(n.value===r)return s.value;let v=xe(p).trim().toLowerCase();return n.value=r,s.value=v,v}}function ye(t,n){return t===n}var he=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(he||{}),Oe=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(Oe||{}),Se=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Se||{});function Le(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let G=Symbol("ListboxContext");function V(t){let n=pe(G,null);if(n===null){let s=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,V),s}return n}let Te=C({name:"Listbox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>ye},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:n,attrs:s,emit:p}){let r=S(1),v=S(null),e=S(null),x=S(null),c=S([]),f=S(""),b=S(null),a=S(1);function u(l=o=>o){let o=b.value!==null?c.value[b.value]:null,i=ce(l(c.value.slice()),h=>m(h.dataRef.domRef)),d=o?i.indexOf(o):null;return d===-1&&(d=null),{options:i,activeOptionIndex:d}}let D=y(()=>t.multiple?1:0),[R,w]=te(y(()=>t.modelValue),l=>p("update:modelValue",l),y(()=>t.defaultValue)),k=y(()=>R.value===void 0?$(D.value,{1:[],0:void 0}):R.value),T={listboxState:r,value:k,mode:D,compare(l,o){if(typeof t.by=="string"){let i=t.by;return l?.[i]===o?.[i]}return t.by(l,o)},orientation:y(()=>t.horizontal?"horizontal":"vertical"),labelRef:v,buttonRef:e,optionsRef:x,disabled:y(()=>t.disabled),options:c,searchQuery:f,activeOptionIndex:b,activationTrigger:a,closeListbox(){t.disabled||r.value!==1&&(r.value=1,b.value=null)},openListbox(){t.disabled||r.value!==0&&(r.value=0)},goToOption(l,o,i){if(t.disabled||r.value===1)return;let d=u(),h=de(l===O.Specific?{focus:O.Specific,id:o}:{focus:l},{resolveItems:()=>d.options,resolveActiveIndex:()=>d.activeOptionIndex,resolveId:P=>P.id,resolveDisabled:P=>P.dataRef.disabled});f.value="",b.value=h,a.value=i??1,c.value=d.options},search(l){if(t.disabled||r.value===1)return;let o=f.value!==""?0:1;f.value+=l.toLowerCase();let i=(b.value!==null?c.value.slice(b.value+o).concat(c.value.slice(0,b.value+o)):c.value).find(h=>h.dataRef.textValue.startsWith(f.value)&&!h.dataRef.disabled),d=i?c.value.indexOf(i):-1;d===-1||d===b.value||(b.value=d,a.value=1)},clearSearch(){t.disabled||r.value!==1&&f.value!==""&&(f.value="")},registerOption(l,o){let i=u(d=>[...d,{id:l,dataRef:o}]);c.value=i.options,b.value=i.activeOptionIndex},unregisterOption(l){let o=u(i=>{let d=i.findIndex(h=>h.id===l);return d!==-1&&i.splice(d,1),i});c.value=o.options,b.value=o.activeOptionIndex,a.value=1},theirOnChange(l){t.disabled||w(l)},select(l){t.disabled||w($(D.value,{0:()=>l,1:()=>{let o=L(T.value.value).slice(),i=L(l),d=o.findIndex(h=>T.compare(i,L(h)));return d===-1?o.push(i):o.splice(d,1),o}}))}};le([e,x],(l,o)=>{var i;T.closeListbox(),ae(o,oe.Loose)||(l.preventDefault(),(i=m(e))==null||i.focus())},y(()=>r.value===0)),be(G,T),ne(y(()=>$(r.value,{0:I.Open,1:I.Closed})));let F=y(()=>{var l;return(l=m(e))==null?void 0:l.closest("form")});return A(()=>{W([F],()=>{if(!F.value||t.defaultValue===void 0)return;function l(){T.theirOnChange(t.defaultValue)}return F.value.addEventListener("reset",l),()=>{var o;(o=F.value)==null||o.removeEventListener("reset",l)}},{immediate:!0})}),()=>{let{name:l,modelValue:o,disabled:i,form:d,...h}=t,P={open:r.value===0,disabled:i,value:k.value};return z(ve,[...l!=null&&k.value!=null?ue({[l]:k.value}).map(([j,J])=>z(ie,re({features:fe.Hidden,key:j,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:d,disabled:i,name:j,value:J}))):[],E({ourProps:{},theirProps:{...s,...se(h,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:P,slots:n,attrs:s,name:"Listbox"})])}}}),$e=C({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(t,{attrs:n,slots:s,expose:p}){var r;let v=(r=t.id)!=null?r:`headlessui-listbox-button-${M()}`,e=V("ListboxButton");p({el:e.buttonRef,$el:e.buttonRef});function x(a){switch(a.key){case g.Space:case g.Enter:case g.ArrowDown:a.preventDefault(),e.openListbox(),B(()=>{var u;(u=m(e.optionsRef))==null||u.focus({preventScroll:!0}),e.value.value||e.goToOption(O.First)});break;case g.ArrowUp:a.preventDefault(),e.openListbox(),B(()=>{var u;(u=m(e.optionsRef))==null||u.focus({preventScroll:!0}),e.value.value||e.goToOption(O.Last)});break}}function c(a){switch(a.key){case g.Space:a.preventDefault();break}}function f(a){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),B(()=>{var u;return(u=m(e.buttonRef))==null?void 0:u.focus({preventScroll:!0})})):(a.preventDefault(),e.openListbox(),Le(()=>{var u;return(u=m(e.optionsRef))==null?void 0:u.focus({preventScroll:!0})})))}let b=me(y(()=>({as:t.as,type:n.type})),e.buttonRef);return()=>{var a,u;let D={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},{...R}=t,w={ref:e.buttonRef,id:v,type:b.value,"aria-haspopup":"listbox","aria-controls":(a=m(e.optionsRef))==null?void 0:a.id,"aria-expanded":e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(u=m(e.labelRef))==null?void 0:u.id,v].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:x,onKeyup:c,onClick:f};return E({ourProps:w,theirProps:R,slot:D,attrs:n,slots:s,name:"ListboxButton"})}}}),ke=C({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:n,slots:s,expose:p}){var r;let v=(r=t.id)!=null?r:`headlessui-listbox-options-${M()}`,e=V("ListboxOptions"),x=S(null);p({el:e.optionsRef,$el:e.optionsRef});function c(a){switch(x.value&&clearTimeout(x.value),a.key){case g.Space:if(e.searchQuery.value!=="")return a.preventDefault(),a.stopPropagation(),e.search(a.key);case g.Enter:if(a.preventDefault(),a.stopPropagation(),e.activeOptionIndex.value!==null){let u=e.options.value[e.activeOptionIndex.value];e.select(u.dataRef.value)}e.mode.value===0&&(e.closeListbox(),B(()=>{var u;return(u=m(e.buttonRef))==null?void 0:u.focus({preventScroll:!0})}));break;case $(e.orientation.value,{vertical:g.ArrowDown,horizontal:g.ArrowRight}):return a.preventDefault(),a.stopPropagation(),e.goToOption(O.Next);case $(e.orientation.value,{vertical:g.ArrowUp,horizontal:g.ArrowLeft}):return a.preventDefault(),a.stopPropagation(),e.goToOption(O.Previous);case g.Home:case g.PageUp:return a.preventDefault(),a.stopPropagation(),e.goToOption(O.First);case g.End:case g.PageDown:return a.preventDefault(),a.stopPropagation(),e.goToOption(O.Last);case g.Escape:a.preventDefault(),a.stopPropagation(),e.closeListbox(),B(()=>{var u;return(u=m(e.buttonRef))==null?void 0:u.focus({preventScroll:!0})});break;case g.Tab:a.preventDefault(),a.stopPropagation();break;default:a.key.length===1&&(e.search(a.key),x.value=setTimeout(()=>e.clearSearch(),350));break}}let f=X(),b=y(()=>f!==null?(f.value&I.Open)===I.Open:e.listboxState.value===0);return()=>{var a,u;let D={open:e.listboxState.value===0},{...R}=t,w={"aria-activedescendant":e.activeOptionIndex.value===null||(a=e.options.value[e.activeOptionIndex.value])==null?void 0:a.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(u=m(e.buttonRef))==null?void 0:u.id,"aria-orientation":e.orientation.value,id:v,onKeydown:c,role:"listbox",tabIndex:0,ref:e.optionsRef};return E({ourProps:w,theirProps:R,slot:D,attrs:n,slots:s,features:N.RenderStrategy|N.Static,visible:b.value,name:"ListboxOptions"})}}}),Fe=C({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(t,{slots:n,attrs:s,expose:p}){var r;let v=(r=t.id)!=null?r:`headlessui-listbox-option-${M()}`,e=V("ListboxOption"),x=S(null);p({el:x,$el:x});let c=y(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===v:!1),f=y(()=>$(e.mode.value,{0:()=>e.compare(L(e.value.value),L(t.value)),1:()=>L(e.value.value).some(l=>e.compare(L(l),L(t.value)))})),b=y(()=>$(e.mode.value,{1:()=>{var l;let o=L(e.value.value);return((l=e.options.value.find(i=>o.some(d=>e.compare(L(d),L(i.dataRef.value)))))==null?void 0:l.id)===v},0:()=>f.value})),a=ge(x),u=y(()=>({disabled:t.disabled,value:t.value,get textValue(){return a()},domRef:x}));A(()=>e.registerOption(v,u)),Y(()=>e.unregisterOption(v)),A(()=>{W([e.listboxState,f],()=>{e.listboxState.value===0&&f.value&&$(e.mode.value,{1:()=>{b.value&&e.goToOption(O.Specific,v)},0:()=>{e.goToOption(O.Specific,v)}})},{immediate:!0})}),Q(()=>{e.listboxState.value===0&&c.value&&e.activationTrigger.value!==0&&B(()=>{var l,o;return(o=(l=m(x))==null?void 0:l.scrollIntoView)==null?void 0:o.call(l,{block:"nearest"})})});function D(l){if(t.disabled)return l.preventDefault();e.select(t.value),e.mode.value===0&&(e.closeListbox(),B(()=>{var o;return(o=m(e.buttonRef))==null?void 0:o.focus({preventScroll:!0})}))}function R(){if(t.disabled)return e.goToOption(O.Nothing);e.goToOption(O.Specific,v)}let w=ee();function k(l){w.update(l)}function T(l){w.wasMoved(l)&&(t.disabled||c.value||e.goToOption(O.Specific,v,0))}function F(l){w.wasMoved(l)&&(t.disabled||c.value&&e.goToOption(O.Nothing))}return()=>{let{disabled:l}=t,o={active:c.value,selected:f.value,disabled:l},{value:i,disabled:d,...h}=t,P={id:v,ref:x,role:"option",tabIndex:l===!0?void 0:-1,"aria-disabled":l===!0?!0:void 0,"aria-selected":f.value,disabled:void 0,onClick:D,onFocus:R,onPointerenter:k,onMouseenter:k,onPointermove:T,onMousemove:T,onPointerleave:F,onMouseleave:F};return E({ourProps:P,theirProps:h,slot:o,attrs:s,slots:n,name:"ListboxOption"})}}});export{ke as A,Fe as F,Te as I,De as a,$e as j,Re as r,me as s};
