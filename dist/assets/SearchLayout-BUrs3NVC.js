import{c as y,o as c,a,L,d as m,aC as M,s as w,M as k,y as V,g as q,e as I,j as l,w as C,H as P,t as b,b as s,u as R,Z as j,r as H,l as N,q as O,v as z}from"./index-BlBeKsLJ.js";import{_ as S}from"./ButtonTab-ChHcEJTF.js";import{_ as D}from"./SelectListBox-C5TQ5uG5.js";import{_ as E}from"./LogoSection.vue_vue_type_script_setup_true_lang-Dg6w-Ry2.js";import{u as F}from"./search-lPjCMzJb.js";import"./listbox-C2KpOBbF.js";function J(p,o){return c(),y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"fill-rule":"evenodd",d:"M2.625 6.75a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0A.75.75 0 0 1 8.25 6h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75ZM2.625 12a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0ZM7.5 12a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12A.75.75 0 0 1 7.5 12Zm-4.875 5.25a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75Z","clip-rule":"evenodd"})])}function T(p,o){return c(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})])}const U={class:"min-h-screen bg-gray-100 dark:bg-gray-800"},G={class:"flex items-center gap-2 text-[24px] text-gray-700 dark:text-white font-medium mt-16"},K={class:"filter flex items-center gap-2 my-4"},Q={class:"buttons bg-gray-200 dark:bg-gray-700 p-[2px] rounded-full text-[16px] flex items-center gap-1 mb-4"},W={key:0,class:"flex flex-col justify-center items-center h-64 text-center px-4"},X={class:"text-sm font-normal text-gray-500 dark:text-gray-400"},Y={__name:"SearchLayout",setup(p){const o=m(!1),i=R(),t=I(),g=m(""),v=M(),{categories:$}=w(v),u=F(),{current_page:f,stores:x,loading:A}=w(u);k(()=>i.currentRoute.value.name,r=>{r=="search-list-stores"?o.value=!0:o.value=!1});const h=[{id:1,name:"حسب السعر",value:"price"},{id:2,name:"حسب المسافة",value:"distance"},{id:3,name:"حسب التقييم",value:"rating"}],d=m({id:1,name:"حسب السعر",value:"price"}),B=V(()=>{const r=$.value.map(e=>({id:e.id,name:e.name,value:e.id}));return[{id:1,name:"جميع الفئات",value:"all"},...r]}),_=m({id:1,name:"جميع الفئات",value:"all"}),Z=async()=>{const r={dependent:d.value.name,categories:_.value.name},e=JSON.stringify({dependent:d.value.value});t.query.type==="category"&&t.query.categoryId?await u.fetchAllStoresByCategory(t.query.categoryId,f.value,e):t.query.id&&await u.fetchAllStoresHasProdcut(t.query.id,f.value,e),i.replace({name:i.currentRoute.value.name,query:{...t.query,...r}})};return q(()=>{g.value=t.query.for,t.name=="search-list-stores"?o.value=!0:o.value=!1;const r=h.find(n=>n.name==t.query.dependent);r&&(d.value=r);const e=B.value.find(n=>n.name==t.query.categories);e&&(_.value=e)}),q(async()=>{t.query.type==="category"&&t.query.categoryId&&t.query.for?await u.fetchAllStoresByCategory(t.query.categoryId):t.query.id&&t.query.for&&await u.fetchAllStoresHasProdcut(t.query.id),await v.fetchAllCategoriesIds()}),k(x,r=>{t.query.type==="category"&&console.log("Stores payload (category search):",r)},{immediate:!0}),(r,e)=>(c(),y("div",U,[l(P,null,{default:C(()=>[l(E)]),_:1}),a("div",G,[e[4]||(e[4]=a("span",null,"نتائج البحث:",-1)),a("span",null,b(g.value),1)]),a("div",K,[l(D,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=n=>d.value=n),options:h},null,8,["modelValue"]),a("div",{class:"border search-button rounded-lg py-[6px] relative px-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 cursor-pointer transition-all hover:bg-gray-50 dark:hover:bg-gray-700",onClick:e[1]||(e[1]=n=>Z())},[l(s(T),{class:"w-6"}),e[5]||(e[5]=a("span",{class:"absolute -top-7 left-1/2 hidden -translate-x-1/2 bg-gray-500/50 text-[12px] px-2 py-1 font-medium rounded-md text-white transition-all"}," بحث ",-1))])]),a("div",Q,[l(S,{label:"قائمة","is-active":o.value,onClick:e[2]||(e[2]=n=>s(i).replace({name:"search-list-stores",query:s(t).query})),class:"py-2 rounded-full",icon:s(J)},null,8,["is-active","icon"]),l(S,{label:"خريطة","is-active":!o.value,onClick:e[3]||(e[3]=n=>s(i).replace({name:"search-map",query:s(t).query})),class:"py-2 rounded-full",icon:s(j)},null,8,["is-active","icon"])]),a("main",null,[H(r.$slots,"default",{},void 0,!0),!s(A)&&s(x).length===0?(c(),y("div",W,[e[6]||(e[6]=a("div",{class:"mb-4"},[a("svg",{class:"w-20 h-20 mx-auto text-gray-400 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),e[7]||(e[7]=a("h3",{class:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-2"}," لم نجد نتائج لبحثك ",-1)),a("p",X,' لا توجد متاجر تبيع "'+b(g.value)+'" في الوقت الحالي ',1)])):N("",!0)])]))}},ee=L(Y,[["__scopeId","data-v-b6b92104"]]),le={__name:"SearchLayout",setup(p){return(o,i)=>{const t=z("router-view");return c(),O(ee,null,{default:C(()=>[l(t)]),_:1})}}};export{le as default};
