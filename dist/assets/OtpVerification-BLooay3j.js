import{aK as _,ar as w,aL as S,m as V,s as j,d as g,c as d,o as l,j as f,a,aD as B,aE as T,a1 as $,l as c,a6 as z,b as e,aP as C,au as D,t as y,w as E,an as I,n as N,T as O,am as P,i as q,q as A}from"./index-BlBeKsLJ.js";import{_ as F,V as M}from"./BackButton-8bkgjEHA.js";const R={class:"flex items-center justify-center bg-gray-50 dark:bg-gray-800 h-screen"},K={class:"mb-4"},L={key:0,class:"text-red-500 text-sm block mt-1"},U={key:1,class:"text-red-500 text-sm block mt-1"},Q={__name:"OtpVerification",setup(G){const b=_({otp:w().required("الكود مطلوب").length(6,"الكود يجب أن يكون 6 أرقام")}),{handleSubmit:x,errors:r,defineField:h}=S({validationSchema:b}),[o,k]=h("otp"),m=V(),{loading:n}=j(m),v=g(localStorage.getItem("resetIdentifier")),s=g("");q("emitter");const p=x(async()=>{s.value="";try{await m.verifyOtp(v.value,o.value)}catch(u){s.value=u?.response?.data?.message||"الكود غير صحيح، يرجى المحاولة مرة أخرى"}});return(u,t)=>(l(),d("div",R,[f(F,{class:"absolute right-6 top-8"}),t[3]||(t[3]=a("div",{class:"logo flex items-center justify-center pt-6 absolute top-1"},[a("img",{src:B,class:"w-32 dark:hidden",alt:"logo"}),a("img",{src:T,class:"w-32 hidden dark:block",alt:"logo"})],-1)),a("form",{onSubmit:t[1]||(t[1]=P((...i)=>e(p)&&e(p)(...i),["prevent"])),class:"bg-white dark:bg-gray-900 shadow-md dark:shadow-gray-600 rounded-lg px-6 py-10 min-w-[250px] w-[30%]"},[t[2]||(t[2]=a("span",{class:"block text-xl font-medium text-blue-600 mt-2 mb-4"}," إدخال رمز التحقق (OTP) ",-1)),a("div",K,[$(a("input",C({dir:"ltr","onUpdate:modelValue":t[0]||(t[0]=i=>D(o)?o.value=i:null)},e(k),{type:"text",placeholder:"أدخل الكود المكون من 6 أرقام",maxlength:"6",class:["focus:border-gray-500 focus:ring-gray-500 rounded-md bg-gray-100 dark:bg-gray-700 dark:text-white block w-full text-center text-xl tracking-[1rem] placeholder:text-[14px] placeholder:font-normal dark:placeholder-gray-400",{"border-red-600 focus:border-red-500 dark:text-white focus:ring-red-600 bg-red-100/70 placeholder:text-red-500":e(r).otp||s.value,"focus:border-gray-500 border-none dark:text-white focus:ring-gray-500  bg-gray-100 dark:bg-gray-700 dark:placeholder-gray-400":!e(r).otp&&!s.value}]}),null,16),[[z,e(o)]]),e(r).otp?(l(),d("span",L,y(e(r).otp),1)):c("",!0),s.value&&!e(r).otp?(l(),d("span",U,y(s.value),1)):c("",!0)]),f(O,{type:"submit",label:"تحقق",class:N(["mt-6 select-none w-full",{"pointer-events-none":e(n)}]),style:I({opacity:e(n)?.8:1})},{icon:E(()=>[e(n)?(l(),A(e(M),{key:0,size:"20",class:"text-gray-50 ml-2"})):c("",!0)]),_:1},8,["style","class"])],32)]))}};export{Q as default};
